<!DOCTYPE html />

<html lang="en" xml:lang="en" xmlns= "http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Language" content="en" />
    <meta http-equiv="Content-Security-Policy" content="
      default-src
      'unsafe-eval' 'unsafe-inline' 'self'
      'self' localhost:*
      d2wy8f7a9ursnm.cloudfront.net
      *.doubleclick.net
      *.giphy.com
      api.github.com
      api.npmjs.org
      api.npms.io
      bundlephobia.com
      cdnjs.cloudflare.com
      fonts.googleapis.com
      fonts.gstatic.com
      notify.bugsnag.com
      registry.npmjs.cf
      registry.npmjs.org
      sessions.bugsnag.com
      unpkg.com
      www.google-analytics.com
      www.googletagmanager.com
      www.gravatar.com
      blob:
      " />

    <meta name="description" content="Graph / visualize of npm dependencies" />
    <meta name="keywords" content="visualize, visualization, graph, npm, npm modules, npm graph, npm licenses" />

    <link rel="icon" type="image/png" href="./favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Inter|Roboto+Condensed|Material+Icons" rel="stylesheet" />
    <link href="./index.css" rel="stylesheet" />
    
    <title>NPMGraph - Visualize NPM Module Dependencies</title>
  </head>

  <body class="theme-lite"></body>
</html>

<script src="//d2wy8f7a9ursnm.cloudfront.net/v5/bugsnag.min.js"></script>
<script>
  const ENV = {appVersion: '0.0.0'}; // Values injected by deploy script
  if (ENV.bugsnagKey){
    const pageStart = Date.now();
    window.bugsnagClient = bugsnag({
      apiKey: ENV.bugsnagKey,
      appVersion: ENV.appVersion || undefined,
      releaseStage: ENV.releaseStage || 'development',
      notifyReleaseStages: ['production'],
      beforeSend: function(report) {
        report.updateMetaData('page', {
          location: String(location),
          pageTime: Date.now() - pageStart
        });
      }
    });
  } else {
    window.bugsnagClient = {
      notify(err, {severity}) {
        console[severity](err);
      }
    }
  }
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- <script src="https://www.googletagmanager.com/gtag/js?id=UA-6434483-2"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
window.GA_TRACKING_ID = 'UA-6434483-2';
gtag('js', new Date());
gtag('config', window.GA_TRACKING_ID);
</script> -->

<script src="/vendor/d3.v5.js"></script>
<script src="/vendor/hpcc-js-wasm.js" type="javascript/worker"></script>
<script src="/vendor/d3-graphviz.js"></script>

<script type="module" src="js/index.js"></script>
<script>
window.addEventListener('DOMContentLoaded', function() {
  // Detect load failure.  `indexLoaded` gets set by index.js if it loads properly
  // If it's not set here, then a script failed to load (probably due to a parse
  // error from some unsupported language feature).
  if (window.indexLoaded) return;

  const body = document.body;
  Object.assign(body.style, {
    // Image from https://www.redbubble.com/people/JonThomson/shop
    background: 'url("/images/fail_giraffe.png") right 50% no-repeat',
    backgroundColor: 'var(--bg1)',
    backgroundSize: '30%',
    display: 'inherit',
  });

  body.innerHTML = `<div style="    position: absolute;
    background-color: var(--bg0);
    left: 0;
    top: 0;
    bottom: 0;
    right: 35%;
    border-radius: 2rem 2rem;
    color: var(--text);
    padding: 1em;
    margin: 1em;">
    <h1>Well this is awkward...</h1>
    <p>Something's not working right.  Please make sure you're running the latest version of Chrome, Firefox, Safari, or Edge.</p>
    <p>If that's not the problem, don't sweat it.  This error has been reported and will be fixed soon.</p>

    <!-- text bubble arrow -->
    <div style="position: absolute;
    width: 0;
    height: 0;
    border-left: 1.5rem solid var(--bg0);
    border-top: 1rem solid transparent;
    border-bottom: 1rem solid transparent;
    bottom: 50%;
    right: -1.5rem;"></div>
  `;
});
</script>
